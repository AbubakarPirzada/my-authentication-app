# My Authentication App

A modern, full-stack authentication application with AI-powered chat assistance, built with SvelteKit. Features secure user management, intelligent chat support, and comprehensive admin controls with PostgreSQL database integration.

## 🚀 Features

### 🔐 Authentication & Security
- **User Authentication**: Secure registration and login system
- **Password Security**: Bcrypt password hashing with salt rounds
- **Session Management**: JWT-based session handling with Auth.js
- **Profile Management**: User profile viewing and editing
- **Password Recovery**: Email-based forgot password functionality
- **Email Verification**: Secure account verification system

### 🤖 AI Chat Assistant
- **Intelligent Support**: AI-powered chat assistant using Google Gemini AI
- **Session Management**: Persistent chat sessions with full history
- **Real-time Chat**: Instant responses with streaming support
- **Context Awareness**: AI understands platform features and can provide technical support
- **Chat History**: Save and manage multiple conversation sessions

### 👥 User Management
- **Dashboard**: Personalized user dashboard with quick actions
- **Admin Panel**: Comprehensive administrative interface
- **User Statistics**: Track user activity and engagement
- **Role Management**: Admin and user role separation

### 📧 Email Integration
- **Email Notifications**: Automated email sending with Nodemailer
- **Email Verification**: Secure account verification emails
- **Password Reset**: Email-based password recovery system

### 🎨 Modern Interface
- **Responsive Design**: Beautiful UI with Tailwind CSS 4.0
- **Dark Theme**: Modern gradient design with purple/slate color scheme
- **Interactive Components**: Smooth animations and transitions
- **TypeScript**: Full type safety throughout the application

## 🛠️ Tech Stack

- **Frontend**: SvelteKit 2.22+ with Svelte 5
- **Backend**: SvelteKit server-side functions
- **Database**: PostgreSQL with Drizzle ORM
- **AI Integration**: Google Gemini AI API
- **Authentication**: Auth.js (formerly NextAuth.js) with SvelteKit adapter
- **Email Service**: Nodemailer for email notifications
- **Styling**: Tailwind CSS 4.0 with Forms plugin
- **Password Hashing**: bcrypt
- **Container**: Docker Compose for database
- **Type Safety**: TypeScript
- **Code Quality**: ESLint, Prettier

## 📁 Project Structure

```
my-authentication-app/
├── src/
│   ├── lib/
│   │   ├── components/              # Reusable Svelte components
│   │   │   ├── ChatInput.svelte     # AI chat input component
│   │   │   ├── ChatMessage.svelte   # Chat message display
│   │   │   ├── ChatSessionManager.svelte # Chat session management
│   │   │   ├── ChatStats.svelte     # Chat statistics
│   │   │   └── SimpleChatContainer.svelte # Main chat container
│   │   └── server/
│   │       ├── auth.ts              # Authentication utilities
│   │       ├── email.ts             # Email service functions
│   │       └── db/
│   │           ├── index.ts         # Database configuration
│   │           ├── schema.ts        # Database schema definitions
│   │           └── chat.ts          # Chat-related database functions
│   ├── routes/
│   │   ├── +layout.svelte           # Global layout
│   │   ├── +layout.server.ts        # Layout server functions
│   │   ├── +page.svelte             # Home page
│   │   ├── admin/                   # Admin panel with user management
│   │   ├── api/                     # API endpoints
│   │   │   ├── chat/                # AI chat API endpoints
│   │   │   ├── health/              # Health check endpoint
│   │   │   ├── resend-verification/ # Email verification resend
│   │   │   └── verify-email/        # Email verification handler
│   │   ├── chat/                    # AI chat interface
│   │   ├── dashboard/               # User dashboard
│   │   │   ├── +page.svelte
│   │   │   └── profile/             # Profile management
│   │   ├── forgot-password/         # Password recovery
│   │   ├── login/                   # Login page
│   │   ├── profile/                 # Public profile
│   │   ├── register/                # User registration
│   │   └── verify-email-pending/    # Email verification pending
│   ├── app.css                      # Global styles
│   ├── app.html                     # HTML template
│   └── hooks.server.ts              # Authentication configuration
├── drizzle/                         # Database migrations
├── docker-compose.yml               # PostgreSQL container
├── drizzle.config.ts               # Drizzle configuration
└── package.json                    # Dependencies and scripts
```

## 🚀 Quick Start

### Prerequisites

- Node.js 18+ 
- Docker and Docker Compose
- Git

### Installation

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd my-authentication-app
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up environment variables**
   Create a `.env` file in the root directory:
   ```env
   DATABASE_URL="postgresql://postgres:12345678@localhost:5432/my_authentication_db"
   AUTH_SECRET="your-super-secret-auth-key-here"
   ```

4. **Start the PostgreSQL database**
   ```bash
   npm run db:start
   ```

5. **Generate and run database migrations**
   ```bash
   npm run db:generate
   npm run db:push
   ```

6. **Start the development server**
   ```bash
   npm run dev
   ```

7. **Open your browser**
   Navigate to `http://localhost:5173`

## 🗄️ Database Setup

The application uses PostgreSQL with Drizzle ORM. The database schema includes:

- **Users Table**: User information with hashed passwords
- **Sessions Table**: Active user sessions
- **Accounts Table**: OAuth provider accounts (extensible)
- **Verification Tokens**: Email verification and password reset tokens

### Database Commands

```bash
# Start PostgreSQL container
npm run db:start

# Generate new migrations
npm run db:generate

# Push schema changes to database
npm run db:push

# Run migrations
npm run db:migrate

# Open Drizzle Studio (database GUI)
npm run db:studio
```

## 🔐 Authentication Features

### User Registration
- Email validation
- Password strength requirements (minimum 6 characters)
- Duplicate email checking
- Automatic password hashing
- Redirect to login after successful registration

### User Login
- Credentials-based authentication
- Secure password verification
- JWT session management
- Automatic dashboard redirect

### Session Management
- JWT-based sessions
- Secure token handling
- Automatic session refresh
- Protected route middleware

### Password Security
- bcrypt hashing with salt rounds
- Secure password comparison
- Password reset functionality

## 🎨 User Interface

The application features a modern, responsive design built with Tailwind CSS:

- **Home Page**: Welcome landing page
- **Registration Page**: User signup form
- **Login Page**: User authentication form
- **Dashboard**: Personalized user interface with quick actions
- **Profile Management**: Edit user information
- **Admin Panel**: Administrative interface
- **Password Recovery**: Forgot password flow

## 🔒 Security Features

- **Password Hashing**: bcrypt with 12 salt rounds
- **Session Security**: JWT tokens with secret signing
- **CSRF Protection**: Built-in SvelteKit protection
- **SQL Injection Prevention**: Drizzle ORM parameterized queries
- **Environment Variables**: Sensitive data in environment files
- **Database Isolation**: Containerized PostgreSQL

## 📱 Routes and Pages

| Route | Description | Protection |
|-------|-------------|------------|
| `/` | Home page | Public |
| `/register` | User registration | Public |
| `/login` | User login | Public |
| `/dashboard` | User dashboard | Protected |
| `/dashboard/profile` | Profile management | Protected |
| `/profile` | Public profile view | Public |
| `/admin` | Admin panel | Protected |
| `/forgot-password` | Password recovery | Public |

## 🛠️ Development Scripts

```bash
# Development
npm run dev              # Start development server
npm run build            # Build for production
npm run preview          # Preview production build

# Code Quality
npm run check            # Type checking
npm run check:watch      # Watch mode type checking
npm run lint             # Run ESLint
npm run format           # Format code with Prettier

# Database
npm run db:start         # Start PostgreSQL container
npm run db:push          # Push schema to database
npm run db:generate      # Generate migrations
npm run db:migrate       # Run migrations
npm run db:studio        # Open Drizzle Studio
```

## 🌐 Environment Variables

Required environment variables:

```env
# Database
DATABASE_URL="postgresql://postgres:12345678@localhost:5432/my_authentication_db"

# Authentication
AUTH_SECRET="your-super-secret-auth-key-minimum-32-characters"
```

## 📊 Database Management

You can manage your PostgreSQL database using:

1. **Drizzle Studio**: Run `npm run db:studio` for a web-based interface
2. **pgAdmin**: Connect to `localhost:5432` with credentials from docker-compose.yml
3. **Command Line**: Use `psql` or any PostgreSQL client

Database credentials (from docker-compose.yml):
- Host: `localhost`
- Port: `5432`
- Database: `my_authentication_db`
- Username: `postgres`
- Password: `12345678`

## 🔧 Configuration

### Drizzle Configuration
The `drizzle.config.ts` file configures the database connection and migration settings.

### Auth.js Configuration
The `src/hooks.server.ts` file contains:
- Authentication providers setup
- Session configuration
- Database adapter configuration
- Custom callbacks for JWT and session handling

### Tailwind Configuration
Modern Tailwind CSS 4.0 with forms plugin for beautiful form styling.

## 🚀 Production Deployment

1. **Build the application**
   ```bash
   npm run build
   ```

2. **Set up production database**
   - Use a managed PostgreSQL service
   - Update `DATABASE_URL` environment variable

3. **Configure environment**
   - Set secure `AUTH_SECRET`
   - Configure trusted hosts
   - Set up SSL if required

4. **Deploy**
   - The app can be deployed to Vercel, Netlify, or any Node.js hosting service
   - Ensure environment variables are configured

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Run tests and linting
5. Submit a pull request

## 📝 License

This project is open source and available under the MIT License.

## 🐛 Troubleshooting

### Common Issues

1. **Database Connection Error**
   - Ensure PostgreSQL container is running: `npm run db:start`
   - Check `DATABASE_URL` environment variable

2. **Authentication Issues**
   - Verify `AUTH_SECRET` is set and minimum 32 characters
   - Check database schema is up to date

3. **Build Errors**
   - Run `npm install` to ensure all dependencies are installed
   - Check TypeScript errors with `npm run check`

### Getting Help

- Check the issues section of the repository
- Review SvelteKit and Auth.js documentation
- Ensure all environment variables are properly configured

---

**Built with ❤️ using SvelteKit, Auth.js, and PostgreSQL**
